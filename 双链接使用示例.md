# åŒé“¾æ¥åŠŸèƒ½ä½¿ç”¨ç¤ºä¾‹

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### 1. è°ƒç”¨ text_to_mindmap å·¥å…·

```javascript
// è¾“å…¥å‚æ•°
{
  "text": "Python ç¼–ç¨‹åŸºç¡€çŸ¥è¯†"
}
```

### 2. è·å–è¿”å›ç»“æœ

```json
{
  "success": true,
  "downloadUrl": "https://aiagenttest.oss-cn-beijing.aliyuncs.com/markmap/Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html?Expires=1886832330&OSSAccessKeyId=xxx&Signature=xxx",
  "previewUrl": "http://page.thingotech.com.cn/page/Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html",
  "filename": "Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html",
  "timestamp": "2025-10-17T08:25:30.123Z",
  "message": "æ€ç»´å¯¼å›¾ç”Ÿæˆå¹¶ä¸Šä¼ æˆåŠŸï¼ˆOSS + Minioï¼‰"
}
```

## ğŸ”— ä¸¤ä¸ªé“¾æ¥çš„ä½¿ç”¨åœºæ™¯

### downloadUrl - OSS ä¸‹è½½é“¾æ¥

**ç‰¹ç‚¹ï¼š**

- âœ… é•¿æœŸæœ‰æ•ˆï¼ˆ5å¹´ï¼‰
- âœ… ç¨³å®šå¯é 
- âœ… å¸¦ç­¾åéªŒè¯
- âœ… é€‚åˆä¸‹è½½å’Œå½’æ¡£

**ä½¿ç”¨åœºæ™¯ï¼š**

- é•¿æœŸä¿å­˜å’Œåˆ†äº«
- ç”Ÿæˆæ°¸ä¹…é“¾æ¥
- æ–‡ä»¶ä¸‹è½½
- ç³»ç»Ÿé›†æˆæ¥å£

**ç¤ºä¾‹ï¼š**

```
https://aiagenttest.oss-cn-beijing.aliyuncs.com/markmap/Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html?Expires=1886832330&OSSAccessKeyId=xxx&Signature=xxx
```

### previewUrl - Minio é¢„è§ˆé“¾æ¥

**ç‰¹ç‚¹ï¼š**

- âœ… ç®€çŸ­æ˜“è®°
- âœ… å¿«é€Ÿè®¿é—®
- âœ… æ— éœ€ç­¾åå‚æ•°
- âœ… é€‚åˆå³æ—¶é¢„è§ˆ

**ä½¿ç”¨åœºæ™¯ï¼š**

- å¿«é€Ÿåˆ†äº«ç»™ä»–äººæŸ¥çœ‹
- å³æ—¶é¢„è§ˆ
- ä¸´æ—¶è®¿é—®
- ç”¨æˆ·ç•Œé¢å±•ç¤º

**ç¤ºä¾‹ï¼š**

```
http://page.thingotech.com.cn/page/Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html
```

## ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹

### åœºæ™¯ 1ï¼šåœ¨èŠå¤©åº”ç”¨ä¸­å±•ç¤º

```markdown
**æ€ç»´å¯¼å›¾å·²ç”Ÿæˆï¼**

ğŸ”— å¿«é€Ÿé¢„è§ˆï¼š[ç‚¹å‡»æŸ¥çœ‹](http://page.thingotech.com.cn/page/Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html)

ğŸ“¥ ä¸‹è½½ä¿å­˜ï¼š[ä¸‹è½½é“¾æ¥](https://aiagenttest.oss-cn-beijing.aliyuncs.com/markmap/Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html?Expires=...)
```

### åœºæ™¯ 2ï¼šåœ¨ç½‘é¡µä¸­åµŒå…¥

```html
<!-- ä½¿ç”¨é¢„è§ˆé“¾æ¥å¿«é€Ÿå±•ç¤º -->
<iframe
  src="http://page.thingotech.com.cn/page/Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html"
  width="100%"
  height="600px"
>
</iframe>

<!-- æä¾›ä¸‹è½½æŒ‰é’® -->
<a
  href="https://aiagenttest.oss-cn-beijing.aliyuncs.com/markmap/..."
  download="Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†.html"
>
  ä¸‹è½½æ€ç»´å¯¼å›¾
</a>
```

### åœºæ™¯ 3ï¼šåœ¨ API å“åº”ä¸­ä½¿ç”¨

```javascript
// API å“åº”
{
  "code": 200,
  "message": "æˆåŠŸ",
  "data": {
    "mindmap": {
      "quickView": "http://page.thingotech.com.cn/page/Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html",
      "download": "https://aiagenttest.oss-cn-beijing.aliyuncs.com/markmap/...",
      "filename": "Pythonç¼–ç¨‹åŸºç¡€çŸ¥è¯†-1729152330123.html"
    }
  }
}
```

## ğŸ›¡ï¸ å®¹é”™å¤„ç†

### Minio ä¸Šä¼ å¤±è´¥æ—¶

å¦‚æœ Minio ä¸Šä¼ å¤±è´¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§ï¼š

```json
{
  "success": true,
  "downloadUrl": "https://aiagenttest.oss-cn-beijing.aliyuncs.com/markmap/file.html?...",
  "previewUrl": "https://aiagenttest.oss-cn-beijing.aliyuncs.com/markmap/file.html?...",
  "filename": "file.html",
  "timestamp": "2025-10-17T08:25:30.123Z",
  "message": "æ€ç»´å¯¼å›¾ç”Ÿæˆå¹¶ä¸Šä¼ æˆåŠŸï¼ˆä»…OSSï¼ŒMinioä¸Šä¼ å¤±è´¥ï¼‰"
}
```

**æ³¨æ„ï¼š** æ­¤æ—¶ `previewUrl` å’Œ `downloadUrl` ç›¸åŒï¼Œéƒ½æŒ‡å‘ OSS é“¾æ¥ã€‚

### é”™è¯¯å¤„ç†ç¤ºä¾‹

```javascript
const response = JSON.parse(result);

if (response.success) {
  // ä¼˜å…ˆä½¿ç”¨é¢„è§ˆé“¾æ¥ï¼ˆæ›´ç®€çŸ­ï¼‰
  const viewUrl = response.previewUrl;

  // åŒæ—¶ä¿å­˜ä¸‹è½½é“¾æ¥ï¼ˆé•¿æœŸæœ‰æ•ˆï¼‰
  const downloadUrl = response.downloadUrl;

  // æ£€æŸ¥æ˜¯å¦æˆåŠŸä¸Šä¼ åˆ° Minio
  if (response.message.includes("OSS + Minio")) {
    console.log("âœ… åŒä¸Šä¼ æˆåŠŸ");
  } else {
    console.log("âš ï¸ ä»… OSS ä¸Šä¼ æˆåŠŸï¼ŒMinio ä¸Šä¼ å¤±è´¥");
  }
} else {
  console.error("âŒ ç”Ÿæˆå¤±è´¥:", response.message);
}
```

## ğŸ“Š å¯¹æ¯”è¡¨æ ¼

| ç‰¹æ€§     | downloadUrl (OSS)    | previewUrl (Minio) |
| -------- | -------------------- | ------------------ |
| URL é•¿åº¦ | å¾ˆé•¿ï¼ˆå¸¦ç­¾åï¼‰       | çŸ­                 |
| æœ‰æ•ˆæœŸ   | 5å¹´                  | -                  |
| è®¿é—®é€Ÿåº¦ | æ­£å¸¸                 | å¿«                 |
| é€‚ç”¨åœºæ™¯ | ä¸‹è½½ã€å½’æ¡£ã€é•¿æœŸåˆ†äº« | é¢„è§ˆã€å³æ—¶åˆ†äº«     |
| ç¨³å®šæ€§   | æé«˜                 | é«˜                 |
| ç­¾åéªŒè¯ | âœ…                   | âŒ                 |

## ğŸ¯ æœ€ä½³å®è·µ

1. **å³æ—¶é¢„è§ˆ**ï¼šä½¿ç”¨ `previewUrl`ï¼Œå› ä¸ºæ›´çŸ­æ›´å‹å¥½
2. **é•¿æœŸä¿å­˜**ï¼šä½¿ç”¨ `downloadUrl`ï¼Œå› ä¸ºæœ‰5å¹´æœ‰æ•ˆæœŸ
3. **ç”¨æˆ·ç•Œé¢**ï¼šæ˜¾ç¤º `previewUrl` ä½œä¸ºä¸»è¦é“¾æ¥ï¼Œ`downloadUrl` ä½œä¸ºä¸‹è½½é€‰é¡¹
4. **ç³»ç»Ÿé›†æˆ**ï¼šåŒæ—¶ä¿å­˜ä¸¤ä¸ªé“¾æ¥ï¼Œä»¥ä¾¿æä¾›å¤šç§è®¿é—®æ–¹å¼

## ğŸ”„ ç‰ˆæœ¬å…¼å®¹æ€§

**v0.2.7 åŠä¹‹å‰ç‰ˆæœ¬ï¼š**

```json
{
  "success": true,
  "url": "https://...", // å•ä¸€é“¾æ¥
  "filename": "...",
  "timestamp": "...",
  "message": "..."
}
```

**v0.2.8 åŠä¹‹åç‰ˆæœ¬ï¼š**

```json
{
  "success": true,
  "downloadUrl": "https://...", // OSS é“¾æ¥
  "previewUrl": "http://...", // Minio é“¾æ¥
  "filename": "...",
  "timestamp": "...",
  "message": "..."
}
```

---

**æç¤º**: å¦‚æœæ‚¨æ­£åœ¨ä»æ—§ç‰ˆæœ¬è¿ç§»ï¼Œè¯·å°†ä»£ç ä¸­çš„ `response.url` æ”¹ä¸º `response.downloadUrl` æˆ– `response.previewUrl`ã€‚
